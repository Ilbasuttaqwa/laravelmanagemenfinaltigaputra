{
  "railway": {
    "environment": "production",
    "services": {
      "laravel": {
        "build": {
          "builder": "NIXPACKS",
          "command": "composer install --no-dev --optimize-autoloader && npm install && npm run build && php artisan config:cache && php artisan route:cache && php artisan view:cache"
        },
        "deploy": {
          "startCommand": "php artisan serve --host=0.0.0.0 --port=$PORT",
          "restartPolicy": "ON_FAILURE",
          "maxRetries": 10
        },
        "environment": {
          "APP_NAME": "Laravel Management System",
          "APP_ENV": "production",
          "APP_DEBUG": "false",
          "APP_URL": "https://zealous-friendship-production.up.railway.app",
          "PORT": "8080",
          "SESSION_DRIVER": "file",
          "CACHE_DRIVER": "file",
          "LOG_LEVEL": "error",
          "DB_CONNECTION": "mysql"
        },
        "database": {
          "service": "mysql",
          "connection": {
            "DB_HOST": "${{MySQL.MYSQLHOST}}",
            "DB_PORT": "${{MySQL.MYSQLPORT}}",
            "DB_DATABASE": "${{MySQL.MYSQLDATABASE}}",
            "DB_USERNAME": "${{MySQL.MYSQLUSER}}",
            "DB_PASSWORD": "${{MySQL.MYSQLPASSWORD}}"
          }
        }
      },
      "mysql": {
        "image": "mysql:9.4.0",
        "environment": {
          "MYSQL_ROOT_PASSWORD": "auto-generated",
          "MYSQL_DATABASE": "railway"
        },
        "volumes": ["mysql_data:/var/lib/mysql"]
      }
    }
  }
}
